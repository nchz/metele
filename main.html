<head>
  <style>
    * {
      box-sizing: border-box;
    }

    .column {
      float: left;
      padding: 5vw 5vw;
      height: 90vh;
    }

    .randw {
      width: 25%;
      background-color: #aaa;
    }

    .text {
      width: 75%;
      background-color: #bbb;
    }
  </style>
</head>

<body>
  <h2>Metele que son pastele</h2>
  <div class="column randw">
    <p id="randw" style="background: #fff" />
    <p id="prevw" />
  </div>
  <div class="column text">
    <textarea id="textinput" style="height:75vh;width:65vw;"></textarea>
  </div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
  function timeout() {
    // delete text.
    // $("#textinput").val("");
    // make it readonly.
    const ti = document.getElementById("textinput");
    ti.setAttribute("readonly", "true");
    ti.setAttribute("style", ti.getAttribute("style") + "background: transparent;");
  }
  const buildTimer = () => setInterval(timeout, 15000);
  var timerId = buildTimer();
  function resetTimer(e) {
    if (e.keyCode == 13 || e.keyCode == 32) {
      clearInterval(timerId);
      timerId = buildTimer();
      // check if target word was used.
      const ws = $("#textinput").val().split(" ");
      const lw = ws[ws.length - 1].replace(/[\.,;]/, "").trim();
      const tw = document.getElementById("randw").innerHTML;
      if (lw === tw) {
        document.getElementById("randw").innerHTML = getRandomWord();
        const prevw = document.getElementById("prevw")
        prevw.innerHTML = tw + "<br>" + prevw.innerHTML;
      }
    }
  }
  document.addEventListener("keydown", resetTimer);

  // async function getWordList() {
  //   const url = "https://raw.githubusercontent.com/mazyvan/most-common-spanish-words/master/most-common-spanish-words-v4.txt";
  //   const response = await fetch(url);
  //   const text = await response.text();
  //   const words = text.split("\n");
  //   return words;
  // }
  // const words = await getWordList();

  const words = ["abrelatas", "afortunado", "aire", "alto", "amable", "amarillo", "anaranjado", "angosto", "animal", "anormal", "antiguo", "aquel", "argentina", "asiento", "atomo", "azul", "bajisimo", "bajo", "bateria", "blanco", "blando", "boton", "brasil", "brillante", "bruto", "buena", "bueno", "cable", "calculadora", "carpeta", "cartera", "casco", "celular", "cerradura", "cesped", "chile", "chileno", "cinco", "circulo", "ciruela", "ciudad", "claridad", "clavel", "competencia", "complejo", "complicado", "computadora", "conocido", "cuaderno", "cualquier", "cuarto", "cuerda", "desafortunado", "desconocido", "deshonesto", "deteriorado", "diez", "dificil", "diligente", "dinamarca", "directo", "disposicion", "dos", "duro", "ejemplos", "enorme", "escuela", "esfera", "esquina", "estupendo", "extremo", "facil", "famoso", "flexible", "francia", "galleta", "generosos", "grande", "gris", "guitarra", "hoja", "honesto", "idea", "incomodas", "increible", "indirecto", "inepto", "inexpresiva", "infeliz", "inobjetable", "inoperante", "insatisfecho", "inteligente", "juguete", "libros", "loros", "magnifico", "mala", "malo", "manantial", "marginado", "mausoleo", "mayor", "mesa", "mexico", "molecula", "mouse", "mueble", "negro", "notas", "nueve", "obsecuente", "ocho", "paciente", "pantalla", "paris", "parlante", "pasto", "pelusa", "pequeno", "periferico", "perro", "piscinas", "planta", "popular", "posavasos", "primer", "programa", "puerta", "querido", "quimica", "quinto", "rectangulo", "redonda", "rigido", "rojo", "ropa", "segundo", "seis", "sencillo", "septimo", "sexto", "siete", "silla", "simple", "sincero", "soberbio", "sonido", "suciedad", "sustancia", "telefono", "televisor", "tercero", "tierra", "tigre", "trabajador", "trabajo", "tres", "triangulo", "tu", "tulipan", "utensilio", "vaso", "ventana", "verde", "vidrio", "violeta", "violin", "visita"];
  function getRandomWord() {
    const i = Math.floor(Math.random() * words.length);
    return words[i];
  }
  document.getElementById("randw").innerHTML = getRandomWord();
</script>